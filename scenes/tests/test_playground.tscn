[gd_scene load_steps=12 format=3 uid="uid://bl2gw07jyexpp"]

[ext_resource type="Script" path="res://scenes/tests/test_playground.gd" id="1_0yeh2"]
[ext_resource type="Material" uid="uid://cvk2wmgqvougc" path="res://resources/materials/prototype_textures/prototype_brick.material" id="1_stuc4"]
[ext_resource type="Material" uid="uid://x3vgwj6i30t8" path="res://resources/materials/prototype_textures/prototype_dark.material" id="2_s4suy"]
[ext_resource type="PackedScene" uid="uid://tgc7puqtj4fp" path="res://scenes/vehicles/raycast/SimpleRaycastKart.tscn" id="4_q51n2"]
[ext_resource type="Script" path="res://scripts/camera/chase_cam.gd" id="4_utfo4"]
[ext_resource type="Script" path="res://scripts/ai_drivers/SimpleAIKartInput.gd" id="5_1lgps"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_8b2fs"]

[sub_resource type="Sky" id="Sky_ikglc"]
sky_material = SubResource("ProceduralSkyMaterial_8b2fs")

[sub_resource type="Environment" id="Environment_dov0w"]
background_mode = 2
sky = SubResource("Sky_ikglc")
ambient_light_color = Color(0.843137, 0.980392, 0.988235, 1)
ambient_light_sky_contribution = 0.8
tonemap_mode = 1

[sub_resource type="Curve3D" id="Curve3D_7cl8j"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -5.81428, 0, -31.0826, 1.56614, 0.290497, -1.54122, -1.56614, -0.290497, 1.54122, -27.8614, 0, -31.1605, 0.962612, -0.066491, -0.909477, -0.962612, 0.066491, 0.909477, -34.7949, 0, -26.642, 0, 0, 0, 0, 0, 0, -36.0414, 0, -16.6702, -1.57956, 0.281044, -1.15173, 1.57956, -0.281044, 1.15173, -34.5612, 0, -9.19131, 0, 0, 0, 0, 0, 0, -19.6814, 0, -5.9193, -2.78972, 0.0017786, -1.06787, 2.78972, -0.0017786, 1.06787, -8.85258, 0, -5.76349, -2.01404, 0.20261, -0.129651, 2.01404, -0.20261, 0.129651, -4.33409, 0, 1.48166, -1.79088, 0.366584, 0.160795, 1.79088, -0.366584, -0.160795, 0.807634, 0, 4.28624, -1.01877, 0.0745678, 1.0651, 1.01877, -0.0745678, -1.0651, 5.0924, 0, 0.468899, 0, 0, 0, 0, 0, 0, 14.7526, 0, 1.09214, -1.00828, 0.0173006, 1.01605, 1.00828, -0.0173006, -1.01605, 20.4397, 0, -1.86825, 0.227144, -0.164721, 0.434738, -0.227144, 0.164721, -0.434738, 20.985, 0, -9.0355, 0, 0, 0, 0, 0, 0, 16.5444, 0, -15.2679, 0, 0, 0, 0, 0, 0, 11.4806, 0, -19.5527, 0.324972, -0.0756402, 1.04075, -0.324972, 0.0756402, -1.04075, 6.33888, 0, -20.1759, 0, 0, 0, 0, 0, 0, 3.76802, 0, -25.7851, 1.0939, -0.121686, 1.00461, -1.0939, 0.121686, -1.00461, -0.127223, 0, -30.3814, 0, 0, 0, 0, 0, 0, -5.81428, 0, -31.0826),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.3623, 0, -0.532215, 0)
}
point_count = 19

[sub_resource type="NavigationMesh" id="NavigationMesh_8b15u"]
vertices = PackedVector3Array(-49, 0.338879, -49, -49, 0.338879, -27.5, -29.5, 0.338879, -27.5, -49, 0.338879, -49, -29.5, 0.338879, -27.5, -0.5, 0.338879, -27.5, -0.5, 0.338879, -27.5, 49, 0.338879, -27.5, 49, 0.338879, -49, -49, 0.338879, -49, -49, 0.338879, -10.5, -29.5, 0.338879, -10.5, -30.25, 0.338879, -11.25, -30.25, 0.338879, -26.75, -29.5, 0.338879, -27.5, -49, 0.338879, -27.5, -49, 0.338879, -10.5, -30.25, 0.338879, -11.25, -30.25, 0.338879, -26.75, -49, 0.338879, -27.5, 0.25, 0.338879, -26.75, 0.25, 0.338879, -15, 10.25, 0.338879, -15, 0.25, 0.338879, -26.75, 10.25, 0.338879, -15, 11.25, 0.338879, -15, 11.25, 0.338879, -15, 49, 0.338879, -15, 49, 0.338879, -27.5, 0.25, 0.338879, -26.75, 49, 0.338879, -27.5, -0.5, 0.338879, -27.5, 0.25, 0.338879, -26.75, 0.25, 0.338879, -11.25, -0.5, 0.338879, -10.5, 6.75, 0.338879, -10.5, 6.75, 0.338879, -10.5, 10.25, 0.338879, -15, 0.25, 0.338879, -15, 0.25, 0.338879, -11.25, 17.5, 0.338879, -4.50001, 16, 0.338879, -3.00001, 49, 0.338879, -3.00001, 17.25, 0.338879, -7.50001, 17.5, 0.338879, -4.50001, 49, 0.338879, -3.00001, 17.25, 0.338879, -7.50001, 49, 0.338879, -3.00001, 49, 0.338879, -15, 14.75, 0.338879, -11.25, 49, 0.338879, -15, 11.25, 0.338879, -15, 14.75, 0.338879, -11.25, 4.75, 0.338879, -8.00001, 6.75, 0.338879, -10.5, -0.5, 0.338879, -10.5, 4.75, 0.338879, -7.00001, 4.75, 0.338879, -8.00001, -0.5, 0.338879, -10.5, 5.75, 0.338879, -6.00001, 4.75, 0.338879, -7.00001, -0.5, 0.338879, -10.5, -29.5, 0.338879, -10.5, -29.5, 0.338879, -10.5, -49, 0.338879, -10.5, -49, 0.338879, -3.00001, 12.75, 0.338879, -3.00001, 5.75, 0.338879, -6.00001, 49, 0.338879, -1.50001, 49, 0.338879, -3.00001, 16, 0.338879, -3.00001, 1, 0.338879, -1.50001, -0.75, 0.338879, -1.50001, 12.75, 0.338879, -3.00001, -49, 0.338879, -3.00001, -49, 0.338879, -1.50001, 1, 0.338879, -1.50001, 16, 0.338879, -3.00001, 12.75, 0.338879, -3.00001, -0.75, 0.338879, -1.50001, -49, 0.338879, 1.74999, -0.75, 0.338879, 1.74999, -1.5, 0.338879, 0.999992, -1.5, 0.338879, -0.750008, -0.75, 0.338879, -1.50001, -49, 0.338879, -1.50001, -49, 0.338879, 1.74999, -1.5, 0.338879, 0.999992, -1.5, 0.338879, -0.750008, -49, 0.338879, -1.50001, 49, 0.338879, -1.50001, 1, 0.338879, -1.50001, 1.75, 0.338879, -0.750008, 1.75, 0.338879, 0.999992, 1, 0.338879, 1.74999, 49, 0.338879, 1.74999, 49, 0.338879, 1.74999, 49, 0.338879, -1.50001, 1.75, 0.338879, -0.750008, 1.75, 0.338879, 0.999992, 49, 0.338879, 49, 49, 0.338879, 1.74999, 1, 0.338879, 1.74999, -0.75, 0.338879, 1.74999, -49, 0.338879, 1.74999, -49, 0.338879, 49, -0.75, 0.338879, 1.74999, -49, 0.338879, 49, 49, 0.338879, 49, 1, 0.338879, 1.74999)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(7, 6, 8), PackedInt32Array(8, 6, 9), PackedInt32Array(12, 11, 10), PackedInt32Array(15, 14, 13), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(22, 21, 20), PackedInt32Array(25, 24, 23), PackedInt32Array(27, 26, 28), PackedInt32Array(28, 26, 29), PackedInt32Array(32, 31, 30), PackedInt32Array(35, 34, 33), PackedInt32Array(39, 38, 36), PackedInt32Array(36, 38, 37), PackedInt32Array(42, 41, 40), PackedInt32Array(45, 44, 43), PackedInt32Array(49, 48, 46), PackedInt32Array(46, 48, 47), PackedInt32Array(52, 51, 50), PackedInt32Array(55, 54, 53), PackedInt32Array(58, 57, 56), PackedInt32Array(60, 59, 61), PackedInt32Array(61, 59, 62), PackedInt32Array(64, 63, 65), PackedInt32Array(65, 63, 67), PackedInt32Array(65, 67, 66), PackedInt32Array(69, 68, 70), PackedInt32Array(70, 68, 71), PackedInt32Array(75, 74, 72), PackedInt32Array(72, 74, 73), PackedInt32Array(79, 78, 76), PackedInt32Array(76, 78, 77), PackedInt32Array(82, 81, 80), PackedInt32Array(85, 84, 83), PackedInt32Array(87, 86, 88), PackedInt32Array(88, 86, 89), PackedInt32Array(92, 91, 90), PackedInt32Array(95, 94, 93), PackedInt32Array(99, 98, 96), PackedInt32Array(96, 98, 97), PackedInt32Array(102, 101, 100), PackedInt32Array(105, 104, 103), PackedInt32Array(109, 108, 106), PackedInt32Array(106, 108, 107)]
sample_partition_type = 1
cell_size = 0.1
cell_height = 0.1
agent_radius = 1.0
agent_max_climb = 0.1

[node name="TestPlayground" type="Node3D"]
script = ExtResource("1_0yeh2")

[node name="Environment" type="Node3D" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_dov0w")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.999662, 0.0245662, -0.00857883, 0, 0.329689, 0.94409, 0.026021, -0.94377, 0.329577, -1.79706, 31.3826, 3.18774)
current = true

[node name="Path3D" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.65205, 0)
curve = SubResource("Curve3D_7cl8j")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_8b15u")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="NavigationRegion3D"]
use_collision = true

[node name="ground" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, 0)
material_override = ExtResource("1_stuc4")
size = Vector3(100, 0.5, 100)
material = ExtResource("2_s4suy")

[node name="box" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
material_override = ExtResource("1_stuc4")
material = ExtResource("1_stuc4")

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(0.258819, -0.776005, -0.575178, 0.965926, 0.20793, 0.154118, -3.68222e-08, -0.595468, 0.803379, 13.2364, -4.22169, -6.85124)
radius = 5.0
height = 14.0
sides = 32

[node name="CSGCylinder3D2" type="CSGCylinder3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -14.9228, -6.14112, -18.9662)
radius = 9.77
height = 28.3156
sides = 32

[node name="SimpleRaycastKart" parent="." instance=ExtResource("4_q51n2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.09228, 1.52321, -1.71612)
drift_grip_factor = 0.9
drift_speed = 3.0
boost_power = 200.0

[node name="ChaseCamRoot" type="Node3D" parent="SimpleRaycastKart"]
top_level = true
script = ExtResource("4_utfo4")

[node name="Camera3D" type="Camera3D" parent="SimpleRaycastKart/ChaseCamRoot"]
transform = Transform3D(1, 0, 0, 0, 0.994037, 0.10904, 0, -0.10904, 0.994037, 0, 1.72285, 2.71337)
current = true
fov = 90.0

[node name="AIControlledKart" parent="." node_paths=PackedStringArray("input") instance=ExtResource("4_q51n2")]
transform = Transform3D(0.759884, 0, -0.650058, 0, 1, 0, 0.650058, 0, 0.759884, -15.3171, 0.424259, 2.61391)
top_speed = 12.0
handling_factor = 180.0
input = NodePath("SimpleAIKartInput")

[node name="SimpleAIKartInput" type="Node3D" parent="AIControlledKart" node_paths=PackedStringArray("chase_target", "chase_path")]
script = ExtResource("5_1lgps")
debug_enabled = true
chase_target = NodePath("../../SimpleRaycastKart")
chase_path = NodePath("../../Path3D")
nav_refresh_interval = 0.1
chase_mode = 2

[node name="AIControlledKart2" parent="." node_paths=PackedStringArray("input") instance=ExtResource("4_q51n2")]
transform = Transform3D(0.759884, 0, -0.650058, 0, 1, 0, 0.650058, 0, 0.759884, -21.0065, 0.424259, 1.60943)
top_speed = 12.0
handling_factor = 180.0
input = NodePath("SimpleAIKartInput")

[node name="SimpleAIKartInput" type="Node3D" parent="AIControlledKart2" node_paths=PackedStringArray("chase_target", "chase_path")]
script = ExtResource("5_1lgps")
debug_enabled = true
chase_target = NodePath("../../SimpleRaycastKart")
chase_path = NodePath("../../Path3D")
nav_refresh_interval = 0.1
chase_mode = 2

[node name="AITarget" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.11225, 0.285188, -33.8883)
